{% extends "helpers/base.jinja" %}

{% block title %}
{% if is_signup %}
    Signup
{% else %}
    Login
{% endif %}
{% endblock %}

{% block content %}
<div align="center">
    <h3>
    {% if is_signup %}
        Signup
    {% else %}
        Login
    {% endif %}
    </h3>
</div>

<form method="post" action="" novalidate>
    <div align="center">
        {{ form.hidden_tag() }}
        {{ form.email(class_="uk-input uk-width-1-2 uk-align-center", placeholder="Email Address") }}
        {{ form.password(class_="uk-input uk-width-1-2 uk-align-center", placeholder="Password") }}
        <label>
            {{ form.remember_me( class ="uk-checkbox", type="checkbox")}}
            Remember me?
        </label>
    </div>
    {{ form.submit(class_="uk-button uk-button-primary uk-width-1-3 uk-margin-small-bottom uk-align-center") }}
</form>

<div align="center">
    {% if is_signup %}
        <h6 class="uk-align-center">Already have an account? Sign in <a href="{{ url_for('auth.login') }}">here</a>!</h6>
    {% else %}
        <h6 class="uk-align-center">Don't have an account? Register <a href="{{ url_for('auth.signup') }}">here</a>!</h6>
    {% endif %}
</div>

<script src="{{ url_for('static', filename='js/iterator.js') }}"></script>

{%- for field, value in form.data.items() %}
    {%- for error in form[field].errors %}
    <div class="uk-container-small uk-align-center uk-alert-danger" uk-alert>
        <a id="{{ field }}-error-close-{{ loop.index }}" class="uk-alert-close" uk-close></a>
        <p>{{ error }}</p>
    </div>
    {%- endfor %}

    <script type="text/javascript">
        const {{ field }}Errors = new NodeIterator('{{ field }}-error-close');
        {{ field }}Errors.applyToAll(error => {
            setTimeout(() => error.click(), 1000 * 5);
        });
    </script>
{%- endfor %}

{% endblock %}

